
@page
@model ShareNet.Areas.Identity.Pages.Account.myFilesModel
@{
}
<style>
    .gg-share {
        box-sizing: border-box;
        position: relative;
        display: block;
        transform: scale(var(--ggs,1));
        width: 6px;
        height: 6px;
        background: currentColor;
        border-radius: 100px;
        box-shadow: 10px -6px 0, 10px 6px 0
    }

        .gg-share::after,
        .gg-share::before {
            content: "";
            display: block;
            box-sizing: border-box;
            position: absolute;
            border-radius: 3px;
            width: 10px;
            height: 2px;
            background: currentColor;
            left: 2px
        }

        .gg-share::before {
            top: 0;
            transform: rotate(-35deg)
        }

        .gg-share::after {
            bottom: 0;
            transform: rotate(35deg)
        }
    </style>
<h1>Moje Pliki</h1>


<div class="mb-3 mt-3">
    <form method="post" asp-page-handler="UploadFile" enctype="multipart/form-data">
        <div class="mb-3">
            <label class="form-label">Wyślij Plik (Max 500MB)</label>
            <input type="file" name="formFile" class="form-control"/>
        </div>
        <button type="submit" class="btn btn-primary">Wyślij</button>
    </form>

</div>


<table class="table table-hover">
        <thead>
            <tr>
                <th class="text-center">Udostępniony</th>
                <th class="text-center">Nazwa</th>
                <th class="text-center">Rozmiar</th>
                <th class="text-center">Akcje</th>

            </tr>
        </thead>
        <tbody>
            @foreach (ShareNet.Models.File item in Model.Files)
            {
                <tr>
                    <td class="text-center">
                    @if (item.isShared)
                    {
                        <div class="d-inline-flex p-3">
                            <div>@Model._baseLink@item.Id</div>
                        </div>
                    }
                </td>
                    <td class ="text-center">
                    <p class="p-2">@item.FileName</p>
                    </td>
                    <td class="text-center">
                        <p class="p-2">@Model.GetSize(item.Size)</p>
                    </td>
                    <td class="text-center">

                    <div class="d-inline-flex">
                        <div class="d-inline-flex p-2">
                                    <form asp-page-handler="DownloadFun" method="post">
                                        <input type="hidden" name="FileId" value="@item.Id" />
                                        <button class="btn btn-primary">Pobierz</button>
                                    </form>
                                </div>
                        @if (!item.isShared)
                        {
                            <div class="d-inline-flex p-2">
                                <form asp-page-handler="ShareFun" method="post" onclick="return confirm('Jesteś pewny, że chcesz udostępnić plik: @item.FileName ?')">
                                    <input type="hidden" name="FileId" value="@item.Id" />
                                    <button class="btn btn-primary">Udostępnij</button>
                                </form>
                            </div>
                        }
                        else
                        {
                            <div class="d-inline-flex p-2">
                                <form asp-page-handler="ShareFunStop" method="post" onclick="return confirm('Jesteś pewny, że chcesz zatrzymać udostępnianie pliku: @item.FileName ?')">
                                    <input type="hidden" name="FileId" value="@item.Id" />
                                    <button class="btn btn-danger">Zatrzymaj Udostępnianie</button>
                                </form>
                            </div>
                        }

                        <div class="d-inline-flex p-2">
                            <form asp-page-handler="DeleteFun" method="post" onclick="return confirm('Jesteś pewny, że chcesz usunąć plik: @item.FileName ?')">
                                        <input type="hidden" name="FileId" value="@item.Id" />
                                        <button class="btn btn-primary">Usuń</button>
                                    </form>
                                </div>
                            </div>
                        
                    </td>
                </tr>
            }
        </tbody>

    </table>


